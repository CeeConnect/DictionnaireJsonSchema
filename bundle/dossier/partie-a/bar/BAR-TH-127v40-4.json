{
  "$id": "https://raw.githubusercontent.com/CeeConnect/DictionnaireJsonSchema/bundle/dossier/partie-a/bar/BAR-TH-127v40-4",
  "$schema": "https://raw.githubusercontent.com/CeeConnect/DictionnaireJsonSchema/main/meta-schema.json",
  "title": "BAR-TH-127",
  "type": "object",
  "properties": {
    "installateur": {
      "$ref": "https://raw.githubusercontent.com/CeeConnect/DictionnaireJsonSchema/main/bundle/dossier/partie-a/bar/_installateur.json"
    }
  },
  "$defs": {
    "main": {
      "properties": {
        "operation": {
          "properties": {
            "referenceAvisTechnique": {
              "title": "Référence de l'avis technique",
              "type": "string"
            },
            "dureeValiditéAvisTechnique": {
              "title": "Durée de validité de l'avis technique",
              "type": "integer"
            }
          },
          "required": [
            "referenceAvisTechnique",
            "dureeValiditéAvisTechnique"
          ]
        }
      },
      "allOf": [
        {
          "if": {
            "properties": {
              "operation": {
                "properties": {
                  "typeInstallation": {
                    "const": "INDIVIDUEL"
                  }
                }
              }
            }
          },
          "then": {
            "properties": {
              "operation": {
                "properties": {
                  "classeEnergetique": {
                    "type": "string",
                    "oneOf": [
                      {
                        "const": "A+",
                        "title": "A+"
                      },
                      {
                        "const": "A",
                        "title": "A"
                      }
                    ]
                  }
                },
                "required": [
                  "classeEnergetique"
                ]
              }
            }
          }
        }
      ]
    }
  },
  "allOf": [
    {
      "$ref": "https://raw.githubusercontent.com/CeeConnect/DictionnaireJsonSchema/main/bundle/fiche/bar/BAR-TH-127v40-4.json"
    },
    {
      "$ref": "https://raw.githubusercontent.com/CeeConnect/DictionnaireJsonSchema/main/bundle/dossier/partie-a/bar/_common.json"
    },
    {
      "$ref": "#/$defs/main"
    }
  ],
  "required": []
}