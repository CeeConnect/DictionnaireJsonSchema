{
  "$id": "https://raw.githubusercontent.com/CeeConnect/DictionnaireJsonSchema/bundle/dossier/attestation-honneur-b",
  "$schema": "https://raw.githubusercontent.com/CeeConnect/DictionnaireJsonSchema/main/meta-schema.json",
  "title": "Bénéficiaire",
  "description": "Bénéficiaire de l'opération d'économies d'énergie",
  "type": "object",
  "properties": {
    "nature": {
      "$ref": "https://raw.githubusercontent.com/CeeConnect/DictionnaireJsonSchema/main/type/common/personnalite-juridique.json"
    },
    "nom": {
      "title": "Nom",
      "description": "Nom de famille du signataire de l'attestation sur l'honneur",
      "type": "string",
      "maxLength": 240
    },
    "prenom": {
      "title": "Prénom",
      "description": "Prénom du signataire de l'attestation sur l'honneur",
      "type": "string",
      "maxLength": 240
    },
    "fonction": {
      "title": "Fonction",
      "description": "Fonction du signataire de l'attestation sur l'honneur",
      "type": "string",
      "maxLength": 240
    },
    "adresse": {
      "$ref": "https://raw.githubusercontent.com/CeeConnect/DictionnaireJsonSchema/main/type/common/adresse.json"
    },
    "telephone": {
      "$ref": "https://raw.githubusercontent.com/CeeConnect/DictionnaireJsonSchema/main/type/common/telephone.json"
    },
    "email": {
      "$ref": "https://raw.githubusercontent.com/CeeConnect/DictionnaireJsonSchema/main/type/common/email.json"
    }
  },
  "allOf": [
    {
      "if": {
        "properties": {
          "nature": {
            "const": "PERSONNE_PHYSIQUE"
          }
        }
      },
      "then": {
        "properties": {
          "type": {
            "$ref": "#/$defs/type",
            "oneOf": [
              {
                "const": "PROPRIETAIRE_UNIQUE",
                "title": "Propriétaire unique"
              },
              {
                "const": "COPROPRIETAIRE",
                "title": "Copropriétaire des équipements"
              },
              {
                "const": "MAITRE_OUVRAGE",
                "title": "Maître d'ouvrage"
              },
              {
                "const": "OCCUPANT_FINANCEUR",
                "title": "Occupant financeur"
              },
              {
                "const": "INDIVISAIRE",
                "title": "Indivisaire"
              }
            ]
          }
        },
        "required": [
          "type"
        ]
      }
    },
    {
      "if": {
        "properties": {
          "nature": {
            "const": "PERSONNE_MORALE"
          }
        }
      },
      "then": {
        "properties": {
          "type": {
            "$ref": "#/$defs/type",
            "oneOf": [
              {
                "const": "PROPRIETAIRE_UNIQUE",
                "title": "Propriétaire unique"
              },
              {
                "const": "COPROPRIETAIRE",
                "title": "Copropriétaire des équipements"
              },
              {
                "const": "MAITRE_OUVRAGE",
                "title": "Maître d'ouvrage"
              },
              {
                "const": "INDIVISAIRE",
                "title": "Indivisaire"
              },
              {
                "const": "SYNDIC_COPROPRIETE",
                "title": "Syndic de copropriété"
              },
              {
                "const": "COLLECTIVITE_AFFECTATAIRE",
                "title": "Collectivité affectataire"
              }
            ]
          },
          "raisonSociale": {
            "title": "Raison sociale",
            "type": "string",
            "maxLength": 240
          },
          "siren": {
            "$ref": "https://raw.githubusercontent.com/CeeConnect/DictionnaireJsonSchema/main/type/common/siren.json"
          }
        },
        "required": [
          "type",
          "raisonSociale"
        ]
      }
    }
  ],
  "$defs": {
    "type": {
      "$ref": "https://raw.githubusercontent.com/CeeConnect/DictionnaireJsonSchema/main/type/common/beneficiaire/type.json"
    }
  },
  "required": [
    "nature",
    "nom",
    "prenom",
    "fonction",
    "adresse",
    "telephone",
    "email",
    "prestation"
  ]
}