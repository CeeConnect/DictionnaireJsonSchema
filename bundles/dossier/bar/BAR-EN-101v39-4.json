{
  "$id": "https://raw.githubusercontent.com/CeeConnect/DictionnaireJsonSchema/bundles/procedure/bar/BAR-EN-101v39-4",
  "$schema": "https://raw.githubusercontent.com/CeeConnect/DictionnaireJsonSchema/main/meta-schema.json",
  "title": "BAR-EN-101",
  "description": "Isolation de combles ou de toiture",
  "type": "object",
  "properties": {
    "typePoseIsolant": {
      "$ref": "#/$defs/typePoseIsolant"
    },
    "resistanceIsolant": {
      "$ref": "#/$defs/isolation/$defs/resistanceIsolant"
    },
    "epaisseurIsolant": {
      "$ref": "#/$defs/isolation/$defs/epaisseurIsolant"
    },
    "posePareVapeur": {
      "$ref": "#/$defs/isolation/$defs/posePareVapeur"
    },
    "marqueReference": {
      "$ref": "#/$defs/isolation/$defs/marqueReference"
    }
  },
  "allOf": [
    {
      "if": {
        "properties": {
          "typePoseIsolant": {
            "$ref": "#/$defs/typePoseIsolant/oneOf/0"
          }
        }
      },
      "then": {
        "properties": {
          "resistanceIsolant": {
            "minimum": 7
          }
        }
      }
    },
    {
      "if": {
        "properties": {
          "typePoseIsolant": {
            "$ref": "#/$defs/typePoseIsolant/oneOf/1"
          }
        }
      },
      "then": {
        "properties": {
          "resistanceIsolant": {
            "minimum": 6
          }
        }
      }
    },
    {
      "$ref": "#/$defs/common"
    }
  ],
  "required": [
    "dateEngagement",
    "dateRealisation",
    "dateVisitePrealable",
    "dateDebut",
    "adresse",
    "typePoseIsolant",
    "posePareVapeur",
    "resistanceIsolant",
    "epaisseurIsolant"
  ],
  "$defs": {
    "common": {
      "$ref": "C:/wamp64/www/project/ceeconnect/dictionnaire/dist/bundles/procedure/bar/common.json"
    },
    "isolation": {
      "$ref": "C:/wamp64/www/project/ceeconnect/dictionnaire/dist/bundles/procedure/bar/isolation.json"
    },
    "typePoseIsolant": {
      "title": "Type de pose",
      "type": "string",
      "oneOf": [
        {
          "const": "COMBLES_PERDUS",
          "title": "Pose en combles perdus"
        },
        {
          "const": "RAMPANT_TOITURES",
          "title": "Pose en rampant de toitures"
        }
      ]
    }
  }
}
