{
  "$id": "https://schemas.ceeconnect.fr/bundles/menage",
  "$schema": "https://raw.githubusercontent.com/CeeConnect/DictionnaireJsonSchema/main/meta-schema.json",
  "title": "Ménage",
  "description": "Ménage bénéficiaire de l'opération d'économies d'énergie",
  "type": "object",
  "properties": {
    "nom": {
      "title": "Nom",
      "description": "Nom de famille de l'un des représentants du ménage",
      "type": "string",
      "maxLength": 240
    },
    "prenom": {
      "title": "Prénom",
      "description": "Prénom de l'un des représentants du ménage",
      "type": "string",
      "maxLength": 240
    },
    "composition": {
      "title": "Composition",
      "description": "Nombre de personnes composant le ménage",
      "type": "integer",
      "minimum": 1
    },
    "foyersFiscaux": {
      "title": "Liste de foyers fiscaux",
      "description": "Liste des foyers fiscaux composant le ménage",
      "type": "array",
      "minContains": 1,
      "items": {
        "$ref": "#/$defs/foyerFiscal"
      }
    }
  },
  "$defs": {
    "foyerFiscal": {
      "title": "Foyer fiscal",
      "type": "object",
      "properties": {
        "nom": {
          "title": "Nom",
          "description": "Nom de famille du premier déclarant",
          "type": "string",
          "maxLength": 240
        },
        "prenom": {
          "title": "Prénom",
          "description": "Prénom du premier déclarant",
          "type": "string",
          "maxLength": 240
        },
        "identifiantFiscal": {
          "$ref": "https://raw.githubusercontent.com/CeeConnect/DictionnaireJsonSchema/main/mixins/identifiant-fiscal.json"
        },
        "referenceAvis": {
          "$ref": "https://raw.githubusercontent.com/CeeConnect/DictionnaireJsonSchema/main/mixins/reference-avis-imposition.json"
        },
        "revenuFiscal": {
          "title": "Revenu fiscal de référence",
          "description": "Revenu fiscal de référence pour l'année N ou N-1",
          "type": "number",
          "minimum": 0
        }
      },
      "required": [
        "nom",
        "prenom",
        "identifiantFiscal",
        "referenceAvis",
        "revenuFiscal"
      ]
    }
  },
  "required": [
    "nom",
    "prenom",
    "composition",
    "foyersFiscaux"
  ]
}