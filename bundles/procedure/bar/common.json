{
  "$id": "https://schemas.ceeconnect.fr/bundles/procedure/bar/common",
  "$schema": "https://raw.githubusercontent.com/CeeConnect/DictionnaireJsonSchema/main/meta-schema.json",
  "properties": {
    "beneficiaire": {

    },
    "operation": {
      "type": "object",
      "properties": {
        "dateEngagement": {
          "$ref": "#/$defs/dateEngagement",
          "formatMinimum": {
            "$data": "1/dateVisitePrealable"
          }
        },
        "dateVisitePrealable": {
          "$ref": "#/$defs/dateVisitePrealable"
        },
        "dateDebut": {
          "$ref": "#/$defs/dateDebut",
          "formatMinimum": {
            "$data": "1/dateEngagement"
          }
        },
        "dateRealisation": {
          "$ref": "#/$defs/dateRealisation",
          "formatMinimum": {
            "$data": "1/dateEngagement"
          }
        },
        "referenceFacture": {
          "$ref": "#/$defs/referenceFacture"
        },
        "adresse": {
          "$ref": "#/$defs/adresse"
        }
      }
    }
  },
  "$defs": {
    "beneficiaire": {

    },
    "dateEngagement": {
      "title": "Date d'engagement",
      "description": "Date de signature du devis ou du contrat",
      "type": "string",
      "format": "date"
    },
    "dateVisitePrealable": {
      "title": "Date de visite préalable",
      "description": "Date de la visite préalable du bâtiment où ont eu lieu les travaux",
      "type": "string",
      "format": "date"
    },
    "dateDebut": {
      "title": "Date de début des travaux",
      "type": "string",
      "format": "date"
    },
    "dateRealisation": {
      "title": "Date de réalisation",
      "description": "Date de preuve de réalisation de l’opération (ex : date de la facture)",
      "type": "string",
      "format": "date"
    },
    "referenceFacture": {
      "title": "Référence de la facture",
      "type": "string",
      "maxLength": 240
    },
    "adresse": {
      "$ref": "https://raw.githubusercontent.com/CeeConnect/DictionnaireJsonSchema/main/mixins/adresse.json"
    },
    "marque": {
      "title": "Marque",
      "type": "string",
      "maxLength": 240
    },
    "reference": {
      "title": "Référence",
      "type": "string",
      "maxLength": 240
    },
    "resistanceIsolant": {
      "title": "Résistance thermmique de l'isolant",
      "type": "number",
      "unit": "m2.K/W"
    },
    "epaisseurIsolant": {
      "title": "Epaisseur de l'isolant",
      "type": "number",
      "minimum": 0,
      "unit": "mm"
    }
  }
}
